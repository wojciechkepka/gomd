language: go
dist: bionic
go:
- 1.15
before_install:
- sudo add-apt-repository universe
- sudo apt -y update
- curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash -
- sudo apt -y install sassc nodejs
- npm install clean-css-cli sass-lint -g
- sass-lint -v -c .sass-lint.yml ./assets/sass/*.sass
install:
- make
script:
- "./scripts/check_working.sh"
before_deploy:
- make buildall VER="$(cat VERSION)"
deploy:
  provider: releases
  user: wojciechkepka
  password:
    secure: u9kWSZg7IjaB+mWUe4jFpuwKR+N8pAgoVJ/S3+E4RcJXX7hVr/n/lF9tteoRe6ovgcsdPnxYXmdoM9Tdac3e8sUjlZTwbO4W+hmMuAxp/nIvqGu478qoZlyLZ+10o5E9Mn4hyuKyCf9oO2jtl3dkOBRMrVg5CyyzdCojxNuEhLLEebe0H8H3v6SbmeiBIziVgU6DcuCYv5BK3otPr5JG7N7NiIPAZa3GFDrMiJXoIf7X20qh8RThk4leWQtwTR1H3vLwW26tGal6McMbEU/8NpMsQOC6729/jw+hUa2hVHcHmvvApLez1g1tZbhoRhn/x7hLPVDJ7AxVA3fWiwUrsxgD/P/xPVw2Vh023S2YkvlhMym9BfMv7dJS6E9HCbUIKjuDQZtxsAS3lZ/EunqXMMkX9fPONG7i6NX5O1rLfjBVhGBBFQLEHW7zvOgI99/i9/uhSAj8ZpiP2HHi3YKear8Fpr1HetwEWD8p4S1dEMq1fDNj0ghoJgFTpFrB0DnbmDUhoseQwPWIoK7j2uA+K66gI8fDYqN8zXET4WqjcwjD5TYUbVg/KXIXNy9adZmj1a6Je7dXqFiGkpAyOgJrbevSFWZJ4McSGY1/s1uFrX1Y0LufjWhv+YQxz3S7cDaU4DC3gQ8ANqo4r0RZtRMU5jnttgvhy13fNhr+yFPq3AU=
  file_glob: true
  file:
  - gomd-*-darwin-amd64.tgz
  - gomd-*-linux-amd64.tgz
  - gomd-*-windows-amd64.tgz
  on:
    tags: true
  skip_cleanup: 'true'
